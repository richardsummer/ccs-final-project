(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{63:function(e,t,n){},64:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(0),r=n.n(s),i=n(26),c=n.n(i),o=(n(63),n(24)),h=n(19),l=n(57),u=n(13),d=n(14),j=n(7),b=n(16),p=n(15),O=(n(52),n(64),n(20)),m=n.n(O),f=n(31),x=n(12),g=n.n(x),v=n(84),y=n(39),k=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={image:null,preview:"",title:"",text:"",isEditing:!1},a.createPost=a.createPost.bind(Object(j.a)(a)),a.handleChange=a.handleChange.bind(Object(j.a)(a)),a.updatePost=a.updatePost.bind(Object(j.a)(a)),a.removePost=a.removePost.bind(Object(j.a)(a)),a.handleImage=a.handleImage.bind(Object(j.a)(a)),a}return Object(d.a)(n,[{key:"handleImage",value:function(e){var t=this,n=e.target.files[0];this.setState({image:n});var a=new FileReader;a.onloadend=function(){t.setState({preview:a.result})},a.readAsDataURL(n)}},{key:"handleChange",value:function(e){this.setState(Object(h.a)({},e.target.name,e.target.value))}},{key:"createPost",value:function(e){e.preventDefault(),fetch("/api/v1/hottakes/",{method:"POST",headers:{"X-CSRFToken":g.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify({title:this.state.title,text:this.state.text,image:this.state.image})}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){console.error("Error:",e)}))}},{key:"updatePost",value:function(){var e=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.props.match.params.id,e.next=4,fetch("/api/v1/hottakes/".concat(n,"/"),{method:"PUT",headers:{"X-CSRFToken":g.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify({title:this.state.title,text:this.state.text})});case 4:this.props.history.push("/hottakes");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removePost",value:function(){var e=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,fetch("/api/v1/hottakes/".concat(t,"/"),{method:"DELETE",headers:{"X-CSRFToken":g.a.get("csrftoken")}});case 3:this.props.history.push("/hottakes");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t&&fetch("/api/v1/hottakes/".concat(t)).then((function(e){return e.json()})).then((function(t){return e.setState(Object(o.a)(Object(o.a)({},t),{},{isEditing:!0}))}))}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"container form-container mt-5 mb-5 pt-3 pb-3 border border-secondary rounded",children:Object(a.jsxs)(v.a,{onSubmit:this.state.isEditing?this.updatePost:this.createPost,className:"col-lg-12",children:[Object(a.jsx)(v.a.Control,{className:"mb-3",placeholder:"Title",size:"lg",id:"title",name:"title",value:this.state.title,onChange:this.handleChange}),Object(a.jsx)(v.a.Group,{controlId:"exampleForm.ControlTextarea1",children:Object(a.jsx)(v.a.Control,{placeholder:"Content",size:"lg",id:"text",name:"text",value:this.state.text,onChange:this.handleChange,as:"textarea",rows:15})}),Object(a.jsx)(v.a.File,{className:"mb-3",name:"image",onChange:this.handleImage}),this.state.isEditing?Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(y.a,{type:"submit",className:"btn btn-primary",size:"lg",block:!0,children:"Save"}),Object(a.jsx)(y.a,{type:"button",onClick:this.removePost,variant:"danger",size:"lg",block:!0,children:"Delete"})]}):Object(a.jsx)(y.a,{type:"submit",className:"btn btn-primary",children:"Create"})]})})}}]),n}(s.Component),C=n(30),S=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={username:"",email:"",password1:"",password2:""},e.handleChange=e.handleChange.bind(Object(j.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(j.a)(e)),e}return Object(d.a)(n,[{key:"handleSubmit",value:function(e){var t=this;return e.preventDefault(),fetch("api/v1/rest-auth/registration/",{method:"POST",headers:{"X-CSRFToken":g.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(this.state)}).then((function(e){return e.json()})).then((function(e){e.key&&(g.a.set("Authorization","Token ".concat(e.key)),localStorage.setItem("user",JSON.stringify(e.user)),t.props.handleAuth({isAuth:!0}))})).catch((function(e){console.error("Error:",e)})),this.setState({error:""})}},{key:"handleChange",value:function(e){this.setState(Object(h.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"Login",children:[Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.state.error&&Object(a.jsxs)("h3",{"data-test":"error",onClick:this.dismissError,children:[Object(a.jsx)("button",{onClick:this.dismissError,children:"\u2716"}),this.state.error]}),Object(a.jsx)("label",{children:"User Name"}),Object(a.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,required:!0}),Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{type:"text",name:"email",value:this.state.email,onChange:this.handleChange,required:!0}),Object(a.jsx)("label",{children:"Password1"}),Object(a.jsx)("input",{type:"password",name:"password1",value:this.state.password1,onChange:this.handleChange,required:!0}),Object(a.jsx)("label",{children:"Password2"}),Object(a.jsx)("input",{type:"password",name:"password2",value:this.state.password2,onChange:this.handleChange,required:!0}),Object(a.jsx)("input",{type:"submit",value:"Register"})]}),Object(a.jsx)("div",{className:"d-flex align-items-baseline",children:Object(a.jsxs)("p",{className:"ml-auto",children:["Already have an account? ",Object(a.jsx)(C.b,{to:"/login",children:"Login"}),"."]})})]})}}]),n}(s.Component),w=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).logout=function(){},e.state={username:"",password:""},e.handleChange=e.handleChange.bind(Object(j.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(j.a)(e)),e}return Object(d.a)(n,[{key:"handleSubmit",value:function(e){var t=this;return e.preventDefault(),fetch("api/v1/rest-auth/login/",{method:"POST",headers:{"X-CSRFToken":g.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(this.state)}).then((function(e){return e.json()})).then((function(e){e.key&&(g.a.set("Authorization","Token ".concat(e.key)),localStorage.setItem("user",JSON.stringify(e.user)),t.props.handleAuth({isAuth:!0}))})).catch((function(e){console.error("Error:",e)})),this.setState({error:""})}},{key:"handleChange",value:function(e){this.setState(Object(h.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"Login",children:[Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.state.error&&Object(a.jsxs)("h3",{"data-test":"error",onClick:this.dismissError,children:[Object(a.jsx)("button",{onClick:this.dismissError,children:"\u2716"}),this.state.error]}),Object(a.jsx)("label",{children:"User Name"}),Object(a.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,required:!0}),Object(a.jsx)("label",{children:"Password"}),Object(a.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0}),Object(a.jsx)("input",{type:"submit",value:"Log In","data-test":"submit"})]}),Object(a.jsx)("div",{className:"d-flex align-items-baseline",children:Object(a.jsxs)("p",{className:"ml-auto",children:["Don't have an account? ",Object(a.jsx)(C.b,{to:"/register",children:"Register"}),"."]})})]})}}]),n}(s.Component),N=n(85),T=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={episodes:[],currently_playing:"",notes:[],text:""},a.adminPostNote=a.adminPostNote.bind(Object(j.a)(a)),a.onChange=a.onChange.bind(Object(j.a)(a)),a.fetchNotes=a.fetchNotes.bind(Object(j.a)(a)),a.selectEpisode=a.selectEpisode.bind(Object(j.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(f.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/spotify_show_episodes/");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n),this.setState({episodes:n.items,currently_playing:n.items[0].id}),console.log("currently_playing",n.items[0].id),this.fetchNotes();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"selectEpisode",value:function(e){this.setState({currently_playing:e},this.fetchNotes)}},{key:"fetchNotes",value:function(){var e=Object(f.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/episodes/".concat(this.state.currently_playing,"/notes/"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({notes:n}),console.log(this.state.currently_playing);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"adminPostNote",value:function(){var e=Object(f.a)(m.a.mark((function e(t){var n,a,s,r,i,c,o,h=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/v1/episodes/");case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,s=a.filter((function(e){return e.show_id===h.state.currently_playing})),console.log(s),r={text:this.state.text,episode:s},console.log(r),i={method:"POST",headers:{"X-CSRFToken":g.a.get("csrftoken"),"Content-Type":"application/json"},body:JSON.stringify(r)},e.next=14,fetch("/api/v1/episodes/".concat(this.state.currently_playing,"/notes/"),i);case 14:return c=e.sent,e.next=17,c.json();case 17:o=e.sent,console.log(o);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e){this.setState(Object(h.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this,t=this.state.episodes.map((function(t){return Object(a.jsx)(N.a.Item,{className:"pt-3 pb-3 border border-left-0 border-right-0 border-dark episode-link",action:!0,variant:"secondary",onClick:function(){return e.selectEpisode(t.id)},children:t.name},t.id)}));this.state.notes.map((function(e){return Object(a.jsx)("div",{children:e.text},e.id)}));return Object(a.jsx)(r.a.Fragment,{children:Object(a.jsxs)("div",{className:"container pt-5",width:"100%",children:[Object(a.jsx)("div",{className:"row player-box",children:this.state.currently_playing&&Object(a.jsx)("iframe",{src:"https://open.spotify.com/embed-podcast/episode/".concat(this.state.currently_playing),title:"player",width:"100%",height:"232",frameBorder:"0",allowtransparency:"true",allow:"encrypted-media"})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)(N.a.Item,{className:"episode-list col-lg-12 col-md-12 mt-3",children:t})})]})})}}]),n}(s.Component),P=n(34);var A=function(){return Object(a.jsxs)(P.a,{style:{width:"18rem"},children:[Object(a.jsx)(P.a.Img,{variant:"top",src:"./rich.jpg/100px180"}),Object(a.jsxs)(P.a.Body,{children:[Object(a.jsx)(P.a.Title,{children:"Card Title"}),Object(a.jsx)(P.a.Text,{children:"Some quick example text to build on the card title and make up the bulk of the card's content."}),Object(a.jsx)(y.a,{variant:"primary",children:"Go somewhere"})]})]})},E=n(83),L=n(78),I=n(82),F=function(e){return Object(a.jsxs)(E.a,{className:"top-nav",variant:"dark",expand:"lg",children:[Object(a.jsx)("a",{href:"/",children:Object(a.jsx)("i",{className:"pl-5 fas fa-football-ball football-icon"})}),Object(a.jsx)(E.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(E.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsxs)(L.a,{className:"mr-auto pl-5",children:[Object(a.jsx)(L.a.Link,{href:"/",children:"Episodes"}),Object(a.jsx)(L.a.Link,{href:"/hottakes/",children:"Hot Takes"}),Object(a.jsx)(L.a.Link,{href:"/hottakes/new/",children:"New Hot Take"})]}),Object(a.jsx)(L.a,{className:"pr-5",children:Object(a.jsxs)(I.a,{className:"pr-3",title:"Account",id:"basic-nav-dropdown",children:[e.isAuth?Object(a.jsx)(I.a.Item,{onClick:e.handleLogout,children:"Logout"}):Object(a.jsx)(I.a.Item,{href:"/login",children:"Login"}),Object(a.jsx)(I.a.Item,{href:"/register",children:"Sign-Up"})]})})]})]})},_=n(79),D=n(80),R=n(81),J=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(P.a,{style:{width:"22rem"},children:[Object(a.jsx)(P.a.Img,{variant:"top",src:this.props.hottake.img}),Object(a.jsxs)(P.a.Body,{children:[Object(a.jsx)(P.a.Title,{children:this.props.hottake.title}),Object(a.jsx)(P.a.Text,{}),Object(a.jsx)(P.a.Link,{href:"#",children:"Read More"}),Object(a.jsx)(P.a.Link,{href:"/hottakes/edit/".concat(this.props.hottake.id),children:"Edit"})]})]})}}]),n}(s.Component),q=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.hottakes.length||this.props.fetchHottakes()}},{key:"render",value:function(){var e=this.props.hottakes.map((function(e){return Object(a.jsx)(J,{hottake:e},e.id)}));return Object(a.jsxs)("div",{className:"container mt-5",children:[Object(a.jsx)(_.a,{fluid:!0,children:Object(a.jsx)(D.a,{children:Object(a.jsx)("h1",{children:"Hot Takes"})})}),Object(a.jsx)(R.a,{children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:e})})})]})}}]),n}(s.Component),H=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={episodes:[]},a}return Object(d.a)(n,[{key:"render",value:function(){return console.log(this.state.episodes),Object(a.jsx)("form",{children:Object(a.jsxs)(v.a.Group,{controlId:"exampleForm.ControlSelect1",children:[Object(a.jsx)(v.a.Label,{children:"Select Episode"}),Object(a.jsxs)(v.a.Control,{as:"select",children:[Object(a.jsx)("option",{children:"1"}),Object(a.jsx)("option",{children:"2"}),Object(a.jsx)("option",{children:"3"}),Object(a.jsx)("option",{children:"4"}),Object(a.jsx)("option",{children:"5"})]})]})})}}]),n}(s.Component),z=n(8),X=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={isAuth:!!g.a.get("Authorization"),hottakes:[],title:"",text:""},a.handleAuth=a.handleAuth.bind(Object(j.a)(a)),a.handleLogout=a.handleLogout.bind(Object(j.a)(a)),a.handleChange=a.handleChange.bind(Object(j.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(j.a)(a)),a.fetchHottakes=a.fetchHottakes.bind(Object(j.a)(a)),a}return Object(d.a)(n,[{key:"fetchHottakes",value:function(){var e=this;fetch("/api/v1/hottakes/").then((function(e){return e.json()})).then((function(t){return e.setState({hottakes:t})}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:this.state.text})};fetch("api/v1/hottakes/new/",n).then((function(e){return e.json()})).then((function(e){return t.setState({hottakes:[e].concat(Object(l.a)(t.state.hottakes)),text:""})}))}},{key:"handleChange",value:function(e){this.setState(Object(h.a)({},e.target.name,e.target.value))}},{key:"handleAuth",value:function(e){this.setState(e)}},{key:"handleLogout",value:function(){var e=this;return console.log("here"),fetch("api/v1/rest-auth/logout/",{method:"POST",headers:{"X-CSRFToken":g.a.get("csrftoken")}}).then((function(e){return e.json()})).then((function(t){"Successfully logged out."===t.detail&&(console.log("firing"),g.a.remove("Authorization"),localStorage.removeItem("user"),e.setState({isAuth:!1}),e.props.history.push("/login"))})).catch((function(e){console.error("Error:",e)})),this.setState({error:""})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)("div",{className:"top-line"}),Object(a.jsx)(F,{isAuth:this.state.isAuth,handleLogout:this.handleLogout}),Object(a.jsxs)(z.c,{children:[Object(a.jsx)(z.a,{path:"/register",render:function(t){return Object(a.jsx)(S,Object(o.a)(Object(o.a)({},t),{},{isAuth:e.state.isAuth,handleAuth:e.handleAuth}))}}),Object(a.jsx)(z.a,{path:"/login",render:function(t){return Object(a.jsx)(w,Object(o.a)(Object(o.a)({},t),{},{isAuth:e.state.isAuth,handleAuth:e.handleAuth}))}}),Object(a.jsx)(z.a,{path:"/notes/new",component:H}),Object(a.jsx)(z.a,{path:"/hottakes/new",component:k}),Object(a.jsx)(z.a,{path:"/hottakes/edit/:id",component:k}),Object(a.jsx)(z.a,{path:"/hottakes",render:function(t){return Object(a.jsx)(q,Object(o.a)(Object(o.a)({},t),{},{hottakes:e.state.hottakes,fetchHottakes:e.fetchHottakes}))}}),Object(a.jsx)(z.a,{path:"/about",component:A}),Object(a.jsx)(z.a,{path:"/",component:T})]}),Object(a.jsxs)("footer",{className:"page-footer font-small unique-color-dark pt-4 mt-5",children:[Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-12 social-bar",children:[Object(a.jsx)("a",{href:"https://www.instagram.com/4verticalspod/",target:"_blank",rel:"noreferrer",children:Object(a.jsx)("i",{className:"fab fa-instagram instagram-icon"})}),Object(a.jsx)("a",{href:"https://twitter.com/4VerticalsPod",target:"_blank",rel:"noreferrer",children:Object(a.jsx)("i",{className:"fab fa-twitter twitter-icon"})}),Object(a.jsx)("a",{href:"https://open.spotify.com/show/6Verqcb4xk7hVvEM2XCjkv",target:"_blank",rel:"noreferrer",children:Object(a.jsx)("i",{className:"fab fa-spotify spotify-icon"})})]})}),Object(a.jsx)("ul",{className:"list-unstyled list-inline text-center py-2"})]}),Object(a.jsx)("div",{className:"footer-copyright text-center py-3",children:"\xa9 2020 Copyright, 4 Verticals"})]})]})}}]),n}(r.a.Component),M=Object(z.f)(X),B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),r(e),i(e)}))};c.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(C.a,{children:Object(a.jsx)(M,{})})}),document.getElementById("root")),B()}},[[73,1,2]]]);
//# sourceMappingURL=main.85bdfc9f.chunk.js.map